# Инструкция по деплою на timeweb.cloud

## Подготовка к деплою

1. **Убедитесь, что все файлы готовы:**
   - `Dockerfile` - оптимизирован для production
   - `nginx.conf` - конфигурация Nginx для SSL и редиректов
   - `timeweb.config.json` - настройки для timeweb.cloud
   - `.dockerignore` - исключения для Docker

2. **Проверьте сборку локально:**
   ```bash
   npm run build
   ```

## Настройка на timeweb.cloud

### 1. Создание проекта
- Войдите в панель управления timeweb.cloud
- Создайте новый проект типа "Docker"
- Подключите ваш GitHub репозиторий

### 2. Настройка домена
- Добавьте домен `littlebarista.ru`
- Включите SSL сертификат (Let's Encrypt)
- Настройте редирект с www на основной домен

### 3. Переменные окружения
Установите следующие переменные в панели управления:
```
NODE_ENV=production
PORT=3000
```

### 4. Автоматические настройки
timeweb.cloud автоматически:
- ✅ Настроит SSL сертификат
- ✅ Настроит редирект HTTP → HTTPS
- ✅ Настроит Nginx с оптимизацией
- ✅ Включит Gzip сжатие
- ✅ Настроит кэширование статических файлов

## Файлы конфигурации

### nginx.conf
Содержит настройки для:
- SSL сертификатов
- Редиректов HTTP → HTTPS
- Проксирования к Next.js
- Кэширования статических файлов
- Gzip сжатия
- Заголовков безопасности

### timeweb.config.json
Содержит метаданные проекта для timeweb.cloud:
- Настройки сборки
- Конфигурация Docker
- Настройки доменов
- SSL настройки

## Проверка деплоя

После деплоя проверьте:
1. ✅ Сайт открывается по HTTPS
2. ✅ HTTP автоматически редиректит на HTTPS
3. ✅ www редиректит на основной домен
4. ✅ SSL сертификат валиден
5. ✅ Статические файлы кэшируются
6. ✅ Форма обратной связи работает

## Поддержка

При возникновении проблем:
1. Проверьте логи в панели timeweb.cloud
2. Убедитесь, что все переменные окружения установлены
3. Проверьте настройки домена и SSL
